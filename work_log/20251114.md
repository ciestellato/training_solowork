以下に、これまでの開発内容を「目的」「構成」「進捗」「成果物」の4つの観点で整理しました。

---

## 🎯 目的

- 音楽フェスティバルやライブイベントの**出演者情報・タイムテーブル・プレイリスト**を一元管理できるWebアプリケーションを構築する  
- 管理者が柔軟にイベント情報を登録・編集できる環境を提供し、ユーザーが**視覚的にイベント全体を把握できるUI**を実現する  
- Spotify APIと連携し、出演アーティストの代表曲を使った**予習用プレイリストを自動生成・保存**できる機能を提供する  
- ステージカラーや並び順など、イベントごとの個性を反映できる**カスタマイズ性の高い設計**を目指す

---

## 🧩 構成

### 技術スタック

| 項目         | 使用技術                          |
|--------------|-----------------------------------|
| フレームワーク | Django                            |
| 言語         | Python, HTML, CSS, JavaScript     |
| データベース | SQLite（Django ORM）              |
| 外部API      | Spotify Web API（OAuth2.0）       |
| 環境管理     | `.env` + `python-dotenv`          |
| バージョン管理 | GitHub                            |

### モデル設計（Django ORM）

| モデル名     | 役割 |
|--------------|------|
| `Event`      | イベント全体（フェス、ツアーなど） |
| `EventDay`   | 公演日＋会場 |
| `Stage`      | ステージ情報（並び順・カラー付き） |
| `Artist`     | アーティスト情報（Spotify連携あり） |
| `Performance`| 出演情報（ステージ・時間帯） |

### 機能モジュール

- `artist_views.py`: アーティスト一覧・詳細・登録
- `event_views.py`: イベント一覧・詳細・登録
- `performance_views.py`: タイムテーブル登録・編集・表示
- `playlist_views.py`: プレイリスト作成・Spotify保存
- `spotify_auth_views.py`: Spotify認証（OAuth2.0）

---

## 🚧 進捗

| 機能 | 状況 |
|------|------|
| モデル設計 | ✅ 完了（Stage拡張・Spotify対応含む） |
| 管理画面対応 | ✅ 完了（並び順・カラー編集可能） |
| タイムテーブル表示 | ✅ 完了（ステージ・時間ごとの表示制御） |
| CSS調整 | ✅ 完了（余白・高さ・色分け対応） |
| スロット統合表示 | ✅ 完了（rowspan未使用） |
| Spotify認証 | ✅ 完了（OAuth2.0＋トークン管理） |
| プレイリスト作成 | ✅ 完了（イベント日程固定＋代表曲取得） |
| Spotify保存 | ✅ 完了（トークンリフレッシュ＋保存後リダイレクト） |

---

## 📝 成果物

### 🎧 プレイリスト作成機能
- イベント日程に基づく出演者選択
- Spotify APIから代表曲を取得し、画面に表示
- 「Spotifyに保存する」ボタンでプレイリストをユーザーのSpotifyアカウントに保存
- トークンの期限切れにも自動対応（リフレッシュ処理）

### 🕒 タイムテーブル管理機能
- 出演アーティスト・ステージ・時間の登録（未登録アーティストのみ表示）
- ステージの選択または新規作成に対応
- 開始・終了時間のバリデーション（開始 < 終了）
- タイムテーブル表示（ステージごと・日程ごとに分離）
- 編集画面からステージ・時間の修正が可能

### 🖥️ 管理画面・UI
- Bootstrapベースの共通レイアウト（`base.html`）
- イベント・アーティスト・タイムテーブル・プレイリストの各画面を統一デザインで表示
- ステージカラーによる視覚的区分とスロット統合表示

---

# 今後の予定

---

## 🎧 スケジュール（2025年11月17日〜11月21日）

| 日付       | タスク内容 | 使用技術・ファイル | 備考 |
|------------|------------|---------------------|------|
| **11/17 (月)** | 🎯 UI改善・検索バー・選択補助 | `playlist_create.html`, JavaScript, CSS | アーティスト検索・チェックボックス補助・選択数表示など |
| **11/18 (火)** | 🧪 テスト・バグ修正 | `test_views.py`, `test_playlist.py` | Spotify APIのエラー処理・選択漏れ・トークン切れ対応など |
| **11/19 (水)** | 📄 ドキュメント整理・README更新 | `README.md`, `docs/playlist_spec.md` | 実装内容の反映・構成図・セットアップ手順の明文化 |
| **11/20 (木)** | 🎤 発表準備・デモ構成 | `slides/playlist_demo.pptx`, `demo_script.md` | スクリーンショット・デモシナリオ・発表練習 |
| **11/21 (金)** | ✅ 成果レビュー・最終提出 | GitHub, 発表会 | チームレビュー・提出物確認・フィードバック対応 |

---

## 🗒️ 補足

- 11/14（金）までに以下が完了済み：
  - プレイリスト作成ビュー実装
  - テンプレート連携・動作確認
  - Spotify認証・保存機能の実装

---
