<!-- festival/templates/event_detail.html -->

<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>{{ event.name }} の詳細</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container mt-4">
    <h1>{{ event.name }} の詳細</h1>

    <div class="mb-3">
        <p><strong>開催期間:</strong> {{ event.start_date }} 〜 {{ event.end_date }}</p>
        <p><strong>場所:</strong> {{ event.location }}</p>
        <p><strong>説明:</strong><br>{{ event.description|linebreaks }}</p>
    </div>

    <h4>開催日程と出演者</h4>
    {% for day, performances in day_performances %}
        <h5>{{ day.date }} @ {{ day.venue }}</h5>
        <ul class="list-group mb-3">
            {% for perf in performances %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
                <div>
                    <a href="{% url 'festival:artist_detail' perf.artist.pk %}">{{ perf.artist.name }}</a>
                </div>
                {% if perf.is_confirmed %}
                    <span class="badge bg-success">確定</span>
                {% else %}
                    <span class="badge bg-warning text-dark">未確定</span>
                {% endif %}
            </li>
            {% empty %}
            <li class="list-group-item text-muted">出演者未登録</li>
            {% endfor %}
        </ul>
    {% empty %}
        <p>日程が登録されていません。</p>
    {% endfor %}
    <a href="{% url 'festival:register_event_day' %}?event_id={{ event.id }}" class="btn btn-secondary">このイベントに出演者を登録</a> 
    <a href="{% url 'festival:event_list' %}" class="btn btn-secondary">イベント一覧に戻る</a>
</body>
</html>