<!-- festival/templates/event_list.html -->

<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>イベント一覧</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container mt-4">
    <h1>🎪 イベント一覧</h1>

    {% for event in events %}
    <div class="card mb-4">
        <div class="card-header">
            <strong><a href="{% url 'festival:event_detail' event.pk %}">{{ event.name }}</a></strong>
            （{{ event.start_date }}〜{{ event.end_date }} / {{ event.location }}）
        </div>
        <div class="card-body">
            <p>{{ event.description|linebreaks }}</p>
            <h5>出演者一覧</h5>
            <ul class="list-group">
                {% for perf in event.performance_set.all %}
                <li class="list-group-item">
                    {{ perf.performance_date }}：{{ perf.artist.name }}
                    {% if perf.is_confirmed %}
                        <span class="badge bg-success">確定</span>
                    {% else %}
                        <span class="badge bg-warning text-dark">未確定</span>
                    {% endif %}
                </li>
                {% empty %}
                <li class="list-group-item text-muted">出演者未登録</li>
                {% endfor %}
            </ul>
        </div>
    </div>
    {% empty %}
    <p>イベントが登録されていません。</p>
    {% endfor %}

    <a href="{% url 'festival:index' %}" class="btn btn-secondary">トップへ戻る</a>
</body>
</html>